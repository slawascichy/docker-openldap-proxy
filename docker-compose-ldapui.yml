networks:
  default-network:
    driver: bridge

services:
  ldap-ui:
    # https://github.com/dnknth/ldap-ui
    image: dnknth/ldap-ui:0.10.1-x86_64
    build: .
    hostname: ldap-ui
    networks:
      - default-network
    environment:
      - LDAP_URL=${UI_LDAP_URI:-ldap://openldap:389}/
      - BASE_DN=${UI_SEARCH_BASE}
      - USE_TLS=${UI_USE_TLS:-}
      - INSECURE_TLS=${UI_INSECURE_TLS:-}
#      - BIND_DN=${UI_BIND_DN}
#      - BIND_PASSWORD=${UI_BIND_PASSWORD}
    ports:
      - "5000:5000"
    restart: unless-stopped
    healthcheck:
      test: "wget -q -O /dev/null http://127.0.0.1:5000"
      interval: 360s
      retries: 2
      timeout: 2s